import{C as c,D as e,E as s}from"./index-8627008b.js";const u="https://sideproject-shuttle.onrender.com",i=c("coupon",{state:()=>({couponDiscount:0}),getters:{cookieCouponDiscount(){return document.cookie.replace(/(?:(?:^|.*;\s*)couponDiscount\s*=\s*([^;]*).*$)|^.*$/,"$1")}},actions:{useCoupon(o){e.get(`${u}/coupons/${o}`).then(t=>{const n=t.data;this.couponDiscount+=t.data.discount,document.cookie=`couponDiscount=${this.couponDiscount}; max-age=86400;Secure`,n.is_used=!0,this.putCouponState(o,n)}).catch(()=>{s.fire({icon:"error",title:"優惠券使用失敗"})})},putCouponState(o,t){e.put(`${u}/coupons/${o}`,t).then(n=>{s.fire({icon:"success",title:`成功套用「${n.data.title}」`,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}}),this.couponCode=""})}}});export{i as u};
