import{f as k}from"./flatpickr-cbaef1e5.js";import{_ as T,a as b,m as g,r as _,o as v,c as y,b as e,f as t,g as u,p as w,C as p,d as f,w as i,D as n,t as r,n as c,k as I}from"./index-77334642.js";import{m as x}from"./memberStore-491edb31.js";const U={data(){return{api:"https://sideproject-shuttle.onrender.com",userId:null,token:null,userTemp:{},isEditing:!1,flatpickr:null}},methods:{...b(w,["baseContent"]),...b(x,["getUserInfo","putUserInfo"])},computed:{...g(w,["alertstyles"]),...g(x,["userInfo"]),sexTw(){switch(this.userInfo.sex){case"male":return"男性";case"female":return"女性";default:return"其他"}}},watch:{isEditing(a){a&&(this.userTemp={...this.userInfo})},userInfo(){this.isEditing=!1}},mounted(){this.userId=document.cookie.replace(/(?:(?:^|.*;\s*)userId\s*=\s*([^;]*).*$)|^.*$/,"$1"),this.token=document.cookie.replace(/(?:(?:^|.*;\s*)token\s*=\s*([^;]*).*$)|^.*$/,"$1"),this.getUserInfo(this.userId,this.token),this.flatpickr=new k(this.$refs.birthdayDiv.firstChild,{dateFormat:"Y-m-d",maxDate:"today"})},beforeUnmount(){this.flatpickr.destroy()}},C={class:"bg-white p-7 py-md-5 rounded mt-3 mt-md-0"},S=e("h2",{class:"title fs-4 text-primary mb-7 mb-md-5"},[e("span",{class:"border-primary"},"會員資料")],-1),D={class:"d-flex flex-column align-items-center"},F={class:"row gx-3 mb-3"},q={for:"name",class:"form-label mb-0 pt-6"},N={class:"col"},B={class:"fs-9 mt-1 text-danger"},M={class:"row g-3 mb-3"},P={for:"email",class:"form-label mb-0 pt-6"},j={class:"col"},z={class:"fs-9 mt-1 text-danger"},A={class:"row g-3 mb-3"},Y={for:"password",class:"form-label mb-0 pt-6"},G={class:"col"},H={class:"fs-9 mt-1 text-danger"},J={class:"fs-9 mt-1 text-danger"},K={class:"row g-3 mb-3"},L={for:"phone",class:"form-label mb-0 pt-6"},O={class:"col"},Q={class:"fs-9 mt-1 text-danger"},R={class:"row g-3 mb-3"},W={for:"birthday",class:"form-label mb-0 pt-6"},X={class:"col",ref:"birthdayDiv"},Z={class:"row g-3 pt-6"},$={class:"form-label mb-0"},ee={key:0,class:"col d-flex"},se={class:"form-check me-3"},le=e("label",{class:"form-check-lable",for:"male"},"男性",-1),oe={class:"form-check me-3"},te=e("label",{class:"form-check-lable",for:"female"},"女性",-1),ie={class:"form-check"},ne=e("label",{class:"form-check-lable",for:"other"},"其他",-1),re={class:"row g-2 mt-7 mt-md-5 justify-content-center"},me={class:"col-10 col-lg-5"},ae=e("button",{class:"btn btn-primary fs-8 w-100",type:"submit"},"送出",-1),de=[ae];function ce(a,o,ue,pe,s,E){const m=_("VField"),h=_("ErrorMessage"),V=_("VForm");return v(),y("div",C,[S,e("div",D,[t(V,{onSubmit:o[8]||(o[8]=d=>a.putUserInfo(a.userInfo.id,s.token,d)),style:{"max-width":"480px"}},{default:u(({errors:d})=>[e("div",F,[e("div",{style:p({width:s.isEditing?"80px":"auto"})},[e("label",q,[f(" 會員名稱 "),i(e("span",null,"："+r(a.userInfo.name),513),[[n,!s.isEditing]])])],4),i(e("div",N,[t(m,{name:"name",rules:"required",modelValue:s.userTemp.name,"onUpdate:modelValue":o[0]||(o[0]=l=>s.userTemp.name=l),type:"text",id:"name",class:c(["form-control fs-7",{"is-invalid":d.name}])},null,8,["modelValue","class"]),t(h,{name:"name"},{default:u(({message:l})=>[e("small",B,r(l.replace("name","名稱")),1)]),_:1})],512),[[n,s.isEditing]])]),e("div",M,[e("div",{style:p({width:s.isEditing?"80px":"auto"})},[e("label",P,[f(" 電子信箱 "),i(e("span",null,"："+r(a.userInfo.email),513),[[n,!s.isEditing]])])],4),i(e("div",j,[t(m,{name:"email",rules:"required|email",modelValue:s.userTemp.email,"onUpdate:modelValue":o[1]||(o[1]=l=>s.userTemp.email=l),type:"email",id:"email",class:c(["form-control fs-7",{"is-invalid":d.name}])},null,8,["modelValue","class"]),t(h,{name:"email"},{default:u(({message:l})=>[e("small",z,r(l.replace("email","信箱")),1)]),_:1})],512),[[n,s.isEditing]])]),e("div",A,[e("div",{style:p({width:s.isEditing?"80px":"auto"})},[e("label",Y,[f(" 密碼 "),i(e("span",null,"：＊＊＊＊＊＊＊",512),[[n,!s.isEditing]])])],4),i(e("div",G,[t(m,{name:"password",rules:"required|alpha_num|min:6|max:20",type:"password",id:"password",class:c(["form-control fs-7",{"is-invalid":d.name}]),placeholder:"請輸入新密碼"},null,8,["class"]),t(h,{name:"password"},{default:u(({message:l})=>[e("small",H,r(l.replace("password","密碼")),1)]),_:1}),t(m,{name:"checkPassword",rules:"confirmed:@password",type:"password",class:c(["form-control fs-7 mt-2",{"is-invalid":d.name}]),placeholder:"請再次輸入新密碼"},null,8,["class"]),t(h,{name:"checkPassword"},{default:u(({message:l})=>[e("small",J,r(l.replace("checkPassword","密碼")),1)]),_:1})],512),[[n,s.isEditing]])]),e("div",K,[e("div",{style:p({width:s.isEditing?"80px":"auto"})},[e("label",L,[f(" 手機號碼 "),i(e("span",null,"："+r(a.userInfo.phone),513),[[n,!s.isEditing]])])],4),i(e("div",O,[t(m,{name:"phone",rules:"required|numeric|length:10",modelValue:s.userTemp.phone,"onUpdate:modelValue":o[2]||(o[2]=l=>s.userTemp.phone=l),type:"phone",id:"phone",class:c(["form-control fs-7",{"is-invalid":d.name}])},null,8,["modelValue","class"]),t(h,{name:"phone"},{default:u(({message:l})=>[e("small",Q,r(l.replace("phone","手機號碼")),1)]),_:1})],512),[[n,s.isEditing]])]),e("div",R,[e("div",{style:p({width:s.isEditing?"80px":"auto"})},[e("label",W,[f(" 生日 "),i(e("span",null,"："+r(a.userInfo.birthday),513),[[n,!s.isEditing]])])],4),i(e("div",X,[t(m,{name:"birthday",modelValue:s.userTemp.birthday,"onUpdate:modelValue":o[3]||(o[3]=l=>s.userTemp.birthday=l),type:"text",id:"birthday",class:"form-control fs-7"},null,8,["modelValue"])],512),[[n,s.isEditing]])]),e("div",Z,[e("div",{style:p({width:s.isEditing?"80px":"auto"})},[e("label",$,[f(" 性別 "),i(e("span",null,"："+r(E.sexTw),513),[[n,!s.isEditing]])])],4),s.isEditing?(v(),y("div",ee,[e("div",se,[t(m,{name:"sex",modelValue:s.userTemp.sex,"onUpdate:modelValue":o[4]||(o[4]=l=>s.userTemp.sex=l),value:"male",type:"radio",class:"form-check-input",id:"male"},null,8,["modelValue"]),le]),e("div",oe,[t(m,{name:"sex",modelValue:s.userTemp.sex,"onUpdate:modelValue":o[5]||(o[5]=l=>s.userTemp.sex=l),value:"female",type:"radio",class:"form-check-input",id:"female"},null,8,["modelValue"]),te]),e("div",ie,[t(m,{name:"sex",modelValue:s.userTemp.sex,"onUpdate:modelValue":o[6]||(o[6]=l=>s.userTemp.sex=l),value:"other",type:"radio",class:"form-check-input",id:"other"},null,8,["modelValue"]),ne])])):I("",!0)]),e("div",re,[e("div",{class:c(["col-10",{"col-lg-5":s.isEditing}])},[e("button",{onClick:o[7]||(o[7]=l=>s.isEditing=!s.isEditing),class:c([[s.isEditing?"btn-primary-light":"btn-primary"],"btn fs-8 w-100"]),type:"button",style:{"min-width":"140px"}},r(s.isEditing?"取消編輯":"變更資料"),3)],2),i(e("div",me,de,512),[[n,s.isEditing]])])]),_:1})])])}const be=T(U,[["render",ce]]);export{be as default};
