import{C as d,D as s,E as r}from"./index-c5d007e1.js";const c="https://sideproject-shuttle.onrender.com",i="https://ec-course-api.hexschool.io/v2/",n="2023shuttle",p=document.cookie.replace(/(?:(?:^|.*;\s*)userId\s*=\s*([^;]*).*$)|^.*$/,"$1"),m=d("orders",{state:()=>({orderInfo:{user:{}}}),actions:{postOrder(e){const t={data:{user:{name:e.名稱,email:e.連絡信箱,tel:e.連絡電話,address:"none",userId:p},message:e.備註,payment:e.付款方式,finalBill:e.finalBill}};s.post(`${i}api/${n}/order`,t).then(o=>{const a=o.data.orderId;document.cookie="couponDiscount=;",document.cookie=`newOrderId=${a}; max-age=86400;Secure`,this.fixBill(e.finalBill,a),r.fire({icon:"success",title:o.data.message,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"},didClose:()=>{this.router.push({name:"order-established"})}})}).catch(o=>{r.fire(`問題${o.response.status}，請洽客服`)})},fixBill(e,t){const o={id:t,total:e};s.post(`${c}/ordersFinalBill`,o)},getOrder(e){s.get(`${i}api/${n}/order/${e}`).then(t=>{this.orderInfo=t.data.order})}}});export{m as u};
