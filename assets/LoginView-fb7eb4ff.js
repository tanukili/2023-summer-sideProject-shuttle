import{B as f}from"./BackgroundBanner-ce24f993.js";import{_ as w,e as m,f as k,g as v,i as s,k as n,l as r,t as p,y as _,A as u,x as g,u as x,s as a}from"./index-d0ec5fb6.js";const y={}.VITE_API_PATH,I={components:{BackgroundBanner:f},data(){return{bannerAd:{title:"2023夏季 織心好友揪團趣",subtitle:"兩人同行，現打 85 折",imgUrl:"background-image: url(public/banner/banner-products.jpg)"},loginInfo:{password:"",email:""}}},methods:{login(c){this.axios.post(`${y}/login`,c).then(e=>{const{accessToken:d}=e.data,{id:i}=e.data.user;document.cookie=`token=${d}; max-age=86400;Secure`,document.cookie=`userId=${i}; max-age=86400;Secure`,this.$swal({icon:"success",title:"登入成功",showConfirmButton:!1,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}}),this.$emit("updateUserId",i),this.$router.push("/")}).catch(e=>{switch(e.response.data){case"Cannot find user":this.$swal("該用戶不存在");break;case"Incorrect password":this.$swal("密碼輸入錯誤");break;default:this.$swal(`問題${e.response.status}，抱歉請洽客服`);break}})}},mounted(){}},B={class:"about"},C={class:"bg-white position-relative z-0"},U={class:"container block-spacing"},V={"aria-label":"breadcrumb"},A={class:"breadcrumb"},T={class:"breadcrumb-item"},D=s("li",{class:"breadcrumb-item active","aria-current":"page"},"登入",-1),E={class:"row"},L={class:"col-6 ps-8 text-white"},P={class:"fs-4 pt-8 mt-7 mb-2"},$={class:"fs-7"},N={class:"col-6 bg-primary-light rounded-5 py-5 shadow"},S=s("h1",{class:"title fs-3 text-primary pt-3 pb-4"},[s("span",{class:"border-primary"},"會員登入")],-1),j={class:"mx-5 form-clear pb-4 border-dashed-b border-secondary-light"},z={class:"form-floating mb-4"},M=s("label",{for:"signUpEmail"},"註冊信箱",-1),R={class:"form-floating pb-3 mb-5"},H=s("label",{for:"signUpPassword"},"密碼",-1),O={class:"d-flex justify-content-between lh-lg"},q={class:"text-center mt-7"};function F(c,e,d,i,o,b){const l=m("RouterLink"),h=m("BackgroundBanner");return k(),v("div",B,[s("div",C,[s("div",U,[s("nav",V,[s("ol",A,[s("li",T,[n(l,{to:"/"},{default:r(()=>[a("首頁")]),_:1})]),D])]),s("div",E,[s("div",L,[s("h2",P,p(o.bannerAd.title),1),s("h3",$,p(o.bannerAd.subtitle),1)]),s("div",N,[S,s("form",j,[s("div",z,[_(s("input",{name:"信箱",type:"email",class:"form-control",id:"signUpEmail",placeholder:"name@example.com","onUpdate:modelValue":e[0]||(e[0]=t=>o.loginInfo.email=t)},null,512),[[u,o.loginInfo.email]]),M]),s("div",R,[_(s("input",{name:"密碼",type:"password",class:"form-control",id:"signUpPassword",placeholder:"password","onUpdate:modelValue":e[1]||(e[1]=t=>o.loginInfo.password=t)},null,512),[[u,o.loginInfo.password]]),H]),s("div",O,[s("a",{href:"#",class:"link-gray-500 text-decoration-underline",onClick:e[2]||(e[2]=g(()=>{},["prevent"]))},"忘記密碼？"),n(l,{to:"/admin-login",class:"link-gray-500"},{default:r(()=>[a("後台登入")]),_:1})]),s("button",{onClick:e[3]||(e[3]=g(t=>b.login(o.loginInfo),["prevent"])),class:x(["btn btn-primary w-100 mt-2 fs-5",!o.loginInfo.email||!o.loginInfo.password?"disabled":!0])}," 登入 ",2)]),s("p",q,[a(" 是新織友嗎？"),n(l,{to:"/signup",class:"link-gray-500 text-decoration-underline fw-bold lh-lg"},{default:r(()=>[a("立即註冊")]),_:1})])])])]),n(h,{bannerImg:o.bannerAd.imgUrl,class:"login-banner"},null,8,["bannerImg"])])])}const K=w(I,[["render",F]]);export{K as default};
