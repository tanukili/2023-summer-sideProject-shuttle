import{_ as $,m as h,k as f,l as v,e as o,f as l,s as c,j as t,u as m,i as _,F as b,q as y,A as w,D,x as d,t as n,z as r,C as x,g as C,B as T}from"./index-f004d629.js";import{u as k}from"./useActivitiesStore-27bd2385.js";import{u as A}from"./useCouponStore-9b46916c.js";import{B as N}from"./BackgroundBanner-a589dbbc.js";const q="/2023-summer-sideProject-shuttle",j={components:{BackgroundBanner:N},data(){return{bannerImg:`background-image: url(${q}/banner/banner-carts.jpg)`,couponCode:""}},methods:{...h(k,["getActivities"]),...h(x,["getCart","putCart","deleteAllCart","deleteCart","goToOrder"]),...h(A,["useCoupon"]),goToOrder(){this.$swal({title:`${this.allActive.title}`,html:`<p class='text-gray-400'>${this.allActive.description}</p>
            <p>目前金額再 <span class='text-danger'>NT$ ${this.countDifference} </span>可折抵 NT$ ${this.allActive.percentOff} </p>`,showDenyButton:!0,showCloseButton:!0,confirmButtonText:"修改訂單",denyButtonText:"下一步",denyButtonColor:"var(--bs-primary)"}).then(s=>{s.isDenied&&this.$router.push("/order")})}},mounted(){},created(){this.getActivities(),this.getCart()},computed:{...f(k,["allActive","unlimitedActivities","numActivities","nowAllDiscount"]),...f(x,["carts","totalBill","nowAllDiscount"]),...f(A,["couponDiscount"]),countDifference(){const s=this.allActive.requiredPrice;return s-this.totalBill%s},imgBase(){return"/2023-summer-sideProject-shuttle"}}},V={class:"bg-white"},S={class:"block-spacing-sm container"},I={"aria-label":"breadcrumb",class:"mb-3"},P={class:"breadcrumb"},O={class:"breadcrumb-item"},U={class:"breadcrumb-item"},z=t("li",{class:"breadcrumb-item active","aria-current":"page"},"購物車",-1),L={key:0,class:"d-flex flex-column align-items-center"},M=t("span",{class:"material-symbols-outlined text-gray-200 p-4 rounded-circle my-4",style:{"font-size":"96px",border:"6px solid var(--bs-gray-100)"}}," production_quantity_limits ",-1),F=t("h2",null,"目前購物車沒有東西",-1),R={key:1},E=t("div",{class:"w-100 w-md-75 d-flex flex-column mx-auto my-5"},[t("ol",{class:"d-flex justify-content-around ps-0 fs-6 fw-bold"},[t("li",null,"訂單確認"),t("li",null,"填寫資料"),t("li",null,"訂單完成")]),t("div",{class:"progress border-dashed border-secondary"},[t("div",{class:"progress-bar",role:"progressbar",style:{width:"33.33%"},"aria-valuenow":"33.33","aria-valuemin":"0","aria-valuemax":"100"})])],-1),G={class:"d-flex align-items-center mb-2"},H=t("span",{class:"material-symbols-outlined icon-semibold"}," undo ",-1),J={class:"table-responsive-sm"},K={class:"table align-middle table-white text-center fs-8 fs-lg-7"},Q=t("thead",null,[t("tr",{class:"table-light bg-light"},[t("th",{scope:"col"}),t("th",{scope:"col"},[t("div",{class:"d-none d-md-flex flex-column"},"預覽")]),t("th",{scope:"col"},"課程名稱"),t("th",{scope:"col"},"價格"),t("th",{scope:"col"},"人數"),t("th",{scope:"col"},"小計"),t("th",{scope:"col"},[t("div",{class:"d-none d-md-flex flex-column px-md-3"}," 適用優惠 ")])])],-1),W={scope:"row"},X=["onClick"],Y=t("span",{class:"material-symbols-outlined icon-fill fs-5"}," delete_forever ",-1),Z=[Y],tt={class:"d-none d-md-flex flex-column align-items-center"},et=["src","alt"],st={class:"d-flex flex-column"},ot={key:0,class:"text-gray-400 text-decoration-line-through"},lt={class:"select-icon"},nt=["onUpdate:modelValue","onChange"],it=["value"],at={class:"d-flex flex-column"},dt={key:0,class:"text-gray-400 text-decoration-line-through"},rt={class:"fs-8 px-md-3"},ct={key:0,class:"d-none d-md-flex flex-column"},ut={key:0},pt={key:1},mt={key:0,class:"text-gray-200 fs-9 lh-lg fw-light"},_t={class:"row mb-4 pb-md-3 pt-2"},ht={class:"col-10 col-md-5"},ft={class:"input-group mb-3 mb-lg-4"},bt={class:"col-8 col-sm-6 col-md-5 col-lg-4 col-xl-3 ms-auto"},gt={class:"list-group rounded-2"},vt={class:"list-group-item border-0 text-mellow d-flex justify-content-between py-3"},yt=t("span",{class:"fw-bold"},"目前總金額",-1),wt={key:0,class:"list-group-item border-0 d-flex justify-content-between"},xt=t("span",{class:"fw-bold"},"優惠券折抵",-1),Ct={class:"text-danger"},kt={key:1,class:"list-group-item border-0 d-flex justify-content-between"},At=t("span",{class:"fw-bold"},"滿額折抵",-1),Bt={class:"text-danger"},$t={key:2,class:"list-group-item pb-3 border-0 d-flex justify-content-between"},Dt=t("span",{class:"fw-bold"},"折扣後金額",-1),Tt={class:"d-flex"};function Nt(s,i,qt,jt,u,g){const B=v("BackgroundBanner"),p=v("RouterLink");return o(),l(b,null,[c(B,{bannerImg:u.bannerImg,class:"cart-banner"},null,8,["bannerImg"]),t("div",V,[t("div",S,[t("nav",I,[t("ol",P,[t("li",O,[c(p,{to:"/"},{default:m(()=>[d("首頁")]),_:1})]),t("li",U,[c(p,{to:"/products"},{default:m(()=>[d("購買課程")]),_:1})]),z])]),s.carts.length?(o(),l("div",R,[E,t("div",G,[c(p,{class:"text-decoration-underline d-inline-block me-auto",to:"/products"},{default:m(()=>[H,d(" 返回課程列表 ")]),_:1}),t("a",{class:"btn btn-sm btn-outline-primary px-3 fw-normal d-inline-block shadow-none",href:"#",onClick:i[0]||(i[0]=_(e=>s.deleteAllCart(),["prevent"]))}," 清空購物車 ")]),t("div",J,[t("table",K,[Q,t("tbody",null,[(o(!0),l(b,null,y(s.carts,e=>(o(),l("tr",{key:e.id},[t("th",W,[t("a",{href:"#",onClick:_(a=>s.deleteCart(e.id),["prevent"])},Z,8,X)]),t("td",null,[t("div",tt,[t("img",{src:`${g.imgBase}${e.product.imageUrl}`,alt:`product${e.id}`,class:"img-fluid",style:{"max-width":"150px"}},null,8,et)])]),t("td",null,n(e.product.title),1),t("td",null,[t("div",st,[e.product.origin_price!==e.product.price?(o(),l("span",ot,n(e.product.origin_price),1)):r("",!0),t("span",{class:C(`${e.product.origin_price!==e.product.price?"text-danger":!1}`)},n(e.product.price),3)])]),t("td",null,[t("div",lt,[w(t("select",{class:"form-select form-select-sm fs-lg-7 pe-4 border-secondary","onUpdate:modelValue":a=>e.qty=a,onChange:a=>s.putCart(e.id,parseInt(e.qty))},[(o(!0),l(b,null,y(e.product.info.capacity-e.product.info.studentNum,a=>(o(),l("option",{value:a,key:a},n(a),9,it))),128))],40,nt),[[T,e.qty]])])]),t("td",null,[t("div",at,[e.final_total!==e.total?(o(),l("span",dt,n(e.total),1)):r("",!0),t("span",{class:C(`${e.final_total!==e.total?"text-danger":!1}`)},n(e.final_total),3)])]),t("td",rt,[e.product.state.promotion?(o(),l("div",ct,[s.unlimitedActivities[e.product.state.promotion]?(o(),l("div",ut,n(s.unlimitedActivities[e.product.state.promotion].title),1)):(o(),l("div",pt,[d(n(s.numActivities[e.product.state.promotion].title)+" ",1),e.qty<s.numActivities[e.product.state.promotion].requiredNum?(o(),l("div",mt,n(s.numActivities[e.product.state.promotion].description),1)):r("",!0)]))])):r("",!0)])]))),128))])])]),t("div",_t,[t("div",ht,[t("div",ft,[w(t("input",{"onUpdate:modelValue":i[1]||(i[1]=e=>u.couponCode=e),type:"text",class:"form-control fs-7",placeholder:"請輸入折扣碼","aria-label":"coupon number","aria-describedby":"coupon-btn"},null,512),[[D,u.couponCode]]),t("button",{class:"btn btn-secondary shadow-none py-2 fs-7",type:"button",id:"coupon-btn",onClick:i[2]||(i[2]=_(e=>s.useCoupon(u.couponCode),["prevent"]))}," 確認使用 ")])]),t("div",bt,[t("ul",gt,[t("li",vt,[yt,d("NT$ "+n(s.totalBill),1)]),s.couponDiscount?(o(),l("li",wt,[xt,t("span",Ct,"NT$ - "+n(s.couponDiscount),1)])):r("",!0),s.allActive.requiredPrice<=s.totalBill?(o(),l("li",kt,[At,t("span",Bt,"NT$ - "+n(s.nowAllDiscount),1)])):r("",!0),s.couponDiscount||s.allActive.requiredPrice<=s.totalBill?(o(),l("li",$t,[Dt,d("NT$ "+n(s.totalBill-s.couponDiscount-s.nowAllDiscount),1)])):r("",!0)])])]),t("div",Tt,[t("button",{class:"btn btn-primary fs-7 fs-lg-6 fw-normal w-75 w-md-50 w-lg-25 mx-auto",onClick:i[3]||(i[3]=_(e=>g.goToOrder(),["prevent"]))}," 訂單確認 ")])])):(o(),l("div",L,[M,F,c(p,{to:"/products",class:"icon-e icon-east btn btn-primary-light mt-5",style:{width:"280px"}},{default:m(()=>[d(" 選購課程 ")]),_:1})]))])])],64)}const Ot=$(j,[["render",Nt]]);export{Ot as default};
