import{q as n,p as u,s as c}from"./index-686eedae.js";const p=n("coupon",{state:()=>({url:"https://sideproject-shuttle.onrender.com",couponDiscount:0,couponId:"",coupon:null}),getters:{cookieCouponDiscount(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)couponDiscount\s*=\s*([^;]*).*$)|^.*$/,"$1");return o||0}},actions:{toggleCoupon(o=""){const t=o?JSON.stringify(o):"";document.cookie=`coupon=${t}; max-age=86400;Secure`,this.getCookieCoupon()},getCookieCoupon(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)coupon\s*=\s*([^;]*).*$)|^.*$/,"$1");this.coupon=o?JSON.parse(o):{};const{id:t,discount:s}=this.coupon;this.couponId=t||"",this.couponDiscount=s||0},useCoupon(o=this.couponId){const{alertstyles:t}=u(),s={...this.coupon};s.is_used=!0,c.put(`${this.url}/coupons/${o}`,s).then(()=>{this.toggleCoupon()}).catch(e=>{t.toast_danger.fire(`問題${e.response.status}，請洽客服`)})}}});export{p as u};
