import{E as i,G as e,H as a}from"./index-0bf40e21.js";const s="https://sideproject-shuttle.onrender.com",c=i("coupon",{state:()=>({couponDiscount:0,coupons:{}}),getters:{cookieCouponDiscount(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)couponDiscount\s*=\s*([^;]*).*$)|^.*$/,"$1");return o||0}},actions:{useCoupon(o){e.get(`${s}/coupons/${o}`).then(t=>{const n=t.data;a.fire({icon:"success",confirmButtonText:"確認",title:`成功套用「${t.data.title}」`,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}}),this.couponDiscount+=t.data.discount,document.cookie=`couponDiscount=${this.couponDiscount}; max-age=86400;Secure`,n.is_used=!0}).catch(()=>{a.fire({icon:"error",title:"優惠券使用失敗"})})},putCouponState(o,t){e.put(`${s}/coupons/${o}`,t).then(n=>{a.fire({icon:"success",confirmButtonText:"確認",title:`成功套用「${n.data.title}」`,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}}),this.couponCode=""})},getCoupons(){e.get(`${s}/coupons`).then(o=>{console.log(o.data),this.coupons=o.data})}}});export{c as u};
