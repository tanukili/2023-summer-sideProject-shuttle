import{E as r,G as o,H as i}from"./index-9450ee47.js";const s="https://sideproject-shuttle.onrender.com",n=document.cookie.replace(/(?:(?:^|.*;\s*)userId\s*=\s*([^;]*).*$)|^.*$/,"$1"),p=r("coupon",{state:()=>({favorites:[],favoritesObj:{}}),getters:{},actions:{addFavorite(t){console.log(t),this.favorites.push(t);const a={productId:t,userId:n};o.post(`${s}/favorites`,a).then(e=>{console.log(e.data),i.fire({confirmButtonText:"確認",title:"已加入收藏",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}})})},toggleFavorite(t){if(this.favorites.indexOf(t)!==-1){const e=this.favoritesObj[t];this.deleteFavorite(e)}else{const e={productId:t,userId:n};o.post(`${s}/favorites`,e).then(()=>{this.getFavorites(),i.fire({confirmButtonText:"確認",title:"已加入收藏",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}})})}},deleteFavorite(t){o.delete(`${s}/favorites/${t}`).then(()=>{this.getFavorites(),i.fire({confirmButtonText:"確認",title:"已移除收藏",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}})})},getFavorites(){o.get(`${s}/favorites?userId=${n}`).then(t=>{const{data:a}=t;a.forEach(e=>{this.favoritesObj[e.productId]=e.id}),this.favorites=a.map(e=>e.productId)})}}});export{p as u};
