import{_ as T,m as p,a as f,r as m,o as a,c as r,f as d,b as t,g as _,w as F,v as L,F as u,e as v,u as k,d as y,n as g,j as C,t as l,k as V,h as E}from"./index-77334642.js";import{u as x}from"./useProductsStore-276b816b.js";import{u as P}from"./useFavoriteStore-864c4e3f.js";import{B as $}from"./BackToTop-1bd7753e.js";import{B as I}from"./BackgroundBanner-1c5069cb.js";const N={components:{BackgroundBanner:I,BackToTop:$},data(){return{bannerImg:"banner/banner-products.png",categories:["全部課程","一日體驗","初階課程","輔助課程"],nowCategory:0,nowSort:"CtoE",showProducts:[]}},computed:{...p(x,["products","pagination"]),...p(k,["numActivities","unlimitedActivities"]),...p(P,["favorites"]),activies(){return{...this.numActivities,...this.unlimitedActivities}}},watch:{products(e){this.showProducts=[...e],this.nowCategory?this.changeCategory(this.nowCategory):window.scrollTo(0,0)},nowCategory(){this.sortProducts(this.nowSort)},nowSort(e){this.sortProducts(e)}},methods:{...f(x,["getProducts","getAllProducts"]),...f(k,["getActivities"]),...f(P,["toggleFavorite","getFavorites"]),changeCategory(e){this.nowCategory=e;const o=["","體驗","初階","輔助"];e?this.showProducts=[...this.products.filter(i=>i.category===o[e])]:this.showProducts=[...this.products],window.scrollTo(0,360)},sortProducts(e){switch(e){case"CtoE":this.showProducts=this.showProducts.sort((o,i)=>o.price-i.price);break;case"EtoC":this.showProducts=this.showProducts.sort((o,i)=>i.price-o.price);break;case"LtoS":this.showProducts=this.showProducts.sort((o,i)=>i.info.classTime.length-o.info.classTime.length);break;case"StoL":this.showProducts=this.showProducts.sort((o,i)=>-i.info.classTime.length+o.info.classTime.length);break;default:this.showProducts=this.showProducts.sort((o,i)=>i.info.capacity-o.info.capacity);break}}},mounted(){this.getAllProducts(),this.getActivities(),this.getFavorites(),this.nowCategory=parseInt(document.cookie.replace(/(?:(?:^|.*;\s*)productCategory\s*=\s*([^;]*).*$)|^.*$/,"$1"),10)},beforeUnmount(){document.cookie="productCategory=0; max-age=86400;Secure"}},O={class:"bg-white"},U={class:"block-spacing-sm container"},D={"aria-label":"breadcrumb"},M={class:"breadcrumb fs-8 fs-lg-7"},R={class:"breadcrumb-item"},j=t("li",{class:"breadcrumb-item active","aria-current":"page"},"購買課程",-1),z=t("h2",{class:"title fs-3 fs-lg-2 mb-md-5"},[t("span",{class:"border-primary pb-2 pb-lg-3"},"課程一覽")],-1),q={class:"d-flex align-items-center mb-2"},G=t("label",{for:"filter-select",class:"lh-lg fw-semibold flex-shrink-0 me-2 ms-auto"},"排序",-1),H={class:"select-icon"},J=E('<option value="" selected>推薦課程</option><option value="CtoE">價格由低到高</option><option value="EtoC">價格由高到低</option><option value="LtoS">上課天數長到短</option><option value="StoL">上課天數短到長</option>',5),K=[J],Q={class:"row"},W={class:"sidebar-sticky col-md-2 col-lg-3 col-xl-2 mb-4 mb-md-0 fs-8 fs-lg-7"},X={class:"nav nav-underline flex-md-column bg-primary-light rounded-1 p-3 p-lg-4"},Y=["onClick"],Z={class:"col"},tt={class:"row g-3 gx-xxl-4 px-4 px-md-0"},st={class:"card-mask position-relative"},et=["src","alt"],ot=["onClick","title"],it={class:"card-body flex-grow-1 pb-3"},at={class:"card-title fs-5"},rt={class:"card-footer pb-3 pt-0"},nt={class:"d-flex align-items-center"},ct={key:0,class:"fs-4 fw-bold text-danger"};function lt(e,o,i,dt,n,b){const S=m("BackgroundBanner"),w=m("RouterLink"),A=m("router-link"),B=m("BackToTop");return a(),r(u,null,[d(S,{bannerImg:n.bannerImg},null,8,["bannerImg"]),t("div",O,[t("div",U,[t("nav",D,[t("ol",M,[t("li",R,[d(w,{to:"/"},{default:_(()=>[y("首頁")]),_:1})]),j])]),z,t("div",q,[G,t("div",H,[F(t("select",{"onUpdate:modelValue":o[0]||(o[0]=s=>n.nowSort=s),class:"form-select fs-7 border-secondary","aria-label":"form-select",id:"filter-select"},K,512),[[L,n.nowSort]])])]),t("div",Q,[t("div",W,[t("nav",X,[(a(!0),r(u,null,v(n.categories,(s,c)=>(a(),r("a",{key:c,class:g(["flex-fill text-center nav-link",{active:n.nowCategory===c}]),href:"#",onClick:C(h=>b.changeCategory(c),["prevent"])},l(s),11,Y))),128))])]),t("div",Z,[t("div",tt,[(a(!0),r(u,null,v(n.showProducts,s=>(a(),r("div",{key:s.id,class:"col-md-6 col-xl-4"},[d(A,{to:`product/${s.id}`,class:"card h-100"},{default:_(()=>{var c;return[t("div",st,[t("img",{src:s.imageUrl,alt:`product${s.id}`,class:"rounded-top",style:{height:"200px"}},null,8,et),t("span",{class:g(["badge text-white position-absolute fs-7 px-6 py-2",[e.numActivities[s.state.promotion]?"bg-warning":"bg-success"]]),style:{top:"16px",left:"-4px"}},l((c=b.activies[s.state.promotion])==null?void 0:c.badge),3),t("a",{href:"#",onClick:C(h=>e.toggleFavorite(s.id),["prevent"]),title:[e.favorites.indexOf(s.id)!==-1?"移除收藏":"加入收藏"]},[t("span",{class:g(["icon-favorite material-symbols-outlined position-absolute",{"icon-fill text-danger":e.favorites.indexOf(s.id)!==-1}]),style:{top:"12px",right:"12px"}}," favorite ",2)],8,ot)]),t("div",it,[t("h3",at,l(s.title),1),(a(!0),r(u,null,v(s.info.tags,h=>(a(),r("span",{class:"badge bg-light me-1 mb-1",key:s.info.tags.indexOf(h)},l(h),1))),128))]),t("div",rt,[t("div",nt,[e.unlimitedActivities[s.state.promotion]?(a(),r("small",ct," $"+l(s.origin_price*e.unlimitedActivities[s.state.promotion].percentOff),1)):V("",!0),t("small",{class:g([e.unlimitedActivities[s.state.promotion]?"fs-6 text-gray-400 text-decoration-line-through ms-2":"fs-4 fw-bold text-black"])}," $"+l(s.origin_price),3)]),d(w,{to:`/product/${s.id}`,class:"btn btn-primary w-100 fs-md-7 mt-3"},{default:_(()=>[y(" 前往購買 ")]),_:2},1032,["to"])])]}),_:2},1032,["to"])]))),128))])])])])]),d(B)],64)}const ft=T(N,[["render",lt]]);export{ft as default};
