import{_ as f,e as _,f as m,g as h,i as e,k as s,l as n,F as g,j as w,s as i,t as a,v as x}from"./index-2287869a.js";const v="https://ec-course-api.hexschool.io/v2/",y="2023shuttle",C={emits:["updateUserId"],props:["nowCarts"],data(){return{newOrderId:""}},methods:{postOrder(l){const u={data:{user:{name:l.名稱,email:l.連絡信箱,tel:l.連絡電話,address:"none"},message:l.備註,payment:l.付款方式}};console.log(l,u),this.axios.post(`${v}api/${y}/order`,u).then(t=>{console.log(t.data),this.orderId=t.data.newOrderId,this.$swal({icon:"success",title:t.data.message,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"},didClose:()=>{this.$router.push("/order-established")}})}).catch(t=>{console.log(t.response)})}},mounted(){console.log(this.nowCarts)}},k={class:"bg-white"},q={class:"block-spacing-sm container"},N={"aria-label":"breadcrumb",class:"mb-3"},V={class:"breadcrumb"},j={class:"breadcrumb-item"},O={class:"breadcrumb-item"},F={class:"breadcrumb-item"},B=e("li",{class:"breadcrumb-item active","aria-current":"page"},"填寫訂單",-1),D=e("div",{class:"w-100 w-md-75 d-flex flex-column mx-auto my-5"},[e("ol",{class:"d-flex justify-content-around ps-0 fs-6 fw-bold"},[e("li",null,"訂單確認"),e("li",null,"填寫資料"),e("li",null,"訂單完成")]),e("div",{class:"progress border-dashed border-secondary"},[e("div",{class:"progress-bar",role:"progressbar",style:{width:"66.66%"},"aria-valuenow":"66.66","aria-valuemin":"0","aria-valuemax":"100"})])],-1),I={class:"row pt-lg-3"},T={class:"col-lg-6"},L={class:"d-flex flex-column h-100"},$=e("h4",{class:"text-center py-4"},[e("span",{class:"border-dashed-b pb-2"},"訂單內容")],-1),E={class:"table-responsive-sm"},P={class:"table align-middle table-white text-center fs-8 fs-lg-7"},S=e("thead",null,[e("tr",{class:"table-light bg-light"},[e("th",{scope:"col"},"預覽"),e("th",{scope:"col"},"課程名稱"),e("th",{scope:"col"},"人數"),e("th",{scope:"col"},"小計")])],-1),A=["src","alt"],M={class:"list-group rounded-2 bg-secondary"},R={class:"list-group-item pt-3 border-0 text-mellow d-flex justify-content-between"},U=e("span",{class:"fw-bold"},"目前總金額",-1),z={key:0,class:"list-group-item border-0 d-flex justify-content-between"},G=e("span",{class:"fw-bold"},"優惠券折抵",-1),H={class:"text-danger"},J={class:"list-group-item border-0 d-flex justify-content-between"},K=e("span",{class:"fw-bold"},"滿額折抵",-1),Q={class:"text-danger"},W={class:"list-group-item pb-3 border-0 d-flex justify-content-between"},X=e("span",{class:"fw-bold"},"折扣後金額",-1),Y=e("span",{class:"material-symbols-outlined icon-semibold"}," undo ",-1),Z={class:"col-lg-6 mt-4 mt-lg-0"},ee={class:"bg-primary-light rounded-2 px-5 py-4"},se=e("h4",{class:"text-center pb-4"},[e("span",{class:"border-dashed-b pb-2"},"填寫資料")],-1),te={class:"form-floating mb-4"},oe=e("label",{for:"name",class:"required"},"如何稱呼",-1),ae={class:"form-floating mb-4"},le=e("label",{for:"phone",class:"required"},"連絡電話",-1),ne={class:"form-floating mb-4"},ce=e("label",{for:"email",class:"required"},"連絡信箱",-1),ie={class:"form-floating mb-4"},de=e("option",{value:"",disabled:"",hidden:""},"請選擇付款方式",-1),re=e("option",{value:"creditCard"},"信用卡",-1),_e=e("option",{value:"cash"},"現金",-1),me=e("option",{value:"transfer"},"帳戶匯款",-1),he=e("option",{value:"linePay"},"Line Pay",-1),ue=e("label",{for:"payment",class:"floating-select"},"付款方式",-1),pe={class:"form-floating pb-3 mb-5"},be=e("label",{for:"remark"},"備註",-1),fe={class:"form-check mb-3"},ge=e("label",{class:"form-check-label required",for:"agreeNotice"}," 我已閱讀並同意 課程注意事項 ",-1),we={class:"text-danger fs-9 ms-2"},xe=e("button",{class:"btn btn-primary w-100 mb-3 fs-6"},"資料送出",-1);function ve(l,u,t,ye,Ce,p){const r=_("RouterLink"),c=_("VField"),d=_("ErrorMessage"),b=_("VForm");return m(),h("div",k,[e("div",q,[e("nav",N,[e("ol",V,[e("li",j,[s(r,{to:"/"},{default:n(()=>[i("首頁")]),_:1})]),e("li",O,[s(r,{to:"/products"},{default:n(()=>[i("購買課程")]),_:1})]),e("li",F,[s(r,{to:"/carts"},{default:n(()=>[i("購物車")]),_:1})]),B])]),D,e("div",I,[e("div",T,[e("div",L,[$,e("div",E,[e("table",P,[S,e("tbody",null,[(m(!0),h(g,null,w(t.nowCarts.carts,o=>(m(),h("tr",{key:o.id},[e("td",null,[e("img",{src:o.product.imageUrl,alt:`product${o.id}`,class:"img-fluid",style:{"max-width":"150px"}},null,8,A)]),e("td",null,a(o.product.title),1),e("td",null,a(o.qty),1),e("td",null,a(o.final_total),1)]))),128))])])]),e("ul",M,[e("li",R,[U,i("NT$ "+a(t.nowCarts.totalBill),1)]),t.nowCarts.coupon?(m(),h("li",z,[G,e("span",H,"NT$ - "+a(t.nowCarts.coupon),1)])):x("",!0),e("li",J,[K,e("span",Q,"NT$ - "+a(t.nowCarts.activeDiscount.discount),1)]),e("li",W,[X,i("NT$ "+a(t.nowCarts.totalBill-t.nowCarts.coupon-t.nowCarts.activeDiscount.discount),1)])]),s(r,{class:"text-decoration-underline d-lg-inline-block mt-auto d-none",to:"/carts"},{default:n(()=>[Y,i(" 返回購物車 ")]),_:1})])]),e("div",Z,[e("div",ee,[se,s(b,{novalidate:"",onSubmit:p.postOrder,class:"form-clear"},{default:n(()=>[e("div",te,[s(c,{name:"名稱",type:"text",rules:"required",class:"form-control fs-7",id:"name",placeholder:"name"}),oe,s(d,{name:"名稱"})]),e("div",ae,[s(c,{name:"連絡電話",type:"phone",rules:"required|numeric|length:10",class:"form-control fs-7",id:"phone",placeholder:"0912345678"}),le,s(d,{name:"連絡電話"})]),e("div",ne,[s(c,{name:"連絡信箱",type:"email",rules:"required|email",class:"form-control fs-7",id:"email",placeholder:"name@example.com"}),ce,s(d,{name:"連絡信箱"})]),e("div",ie,[s(c,{name:"付款方式",rules:"required",as:"select",class:"form-select w-100 ps-3 lh-lg fs-7",id:"payment",placeholder:"付款方式"},{default:n(()=>[de,re,_e,me,he]),_:1}),ue,s(d,{name:"付款方式"})]),e("div",pe,[s(c,{name:"備註",as:"textarea",type:"textarea",value:"",class:"form-control fs-7 text-wrap",id:"remark",placeholder:"備註欄位",style:{height:"116px"}}),be]),e("div",fe,[s(c,{name:"同意",rules:"required",type:"checkbox",id:"agreeNotice",class:"form-check-input",value:"isAgree"}),ge,s(d,{name:"同意"},{default:n(({message:o})=>[e("span",we,a(o="請閱讀完後勾選"),1)]),_:1})]),xe]),_:1},8,["onSubmit"])])])])])])}const qe=f(C,[["render",ve]]);export{qe as default};
