import{q as d,s as o,x as f,p as n}from"./index-686eedae.js";const a="https://sideproject-shuttle.onrender.com",r=document.cookie.replace(/(?:(?:^|.*;\s*)userId\s*=\s*([^;]*).*$)|^.*$/,"$1"),h=d("favorite",{state:()=>({favorites:[],favoritesObj:{}}),getters:{},actions:{addFavorite(t){this.favorites.push(t);const e={productId:t,userId:r};o.post(`${a}/favorites`,e).then(()=>{f.fire({confirmButtonText:"確認",title:"已加入收藏",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}})})},toggleFavorite(t){const{alertstyles:e,baseContent:s}=n();if(this.favorites.indexOf(t)!==-1){const i=this.favoritesObj[t];this.deleteFavorite(i)}else{const i={productId:t,userId:r};o.post(`${a}/favorites`,i).then(()=>{this.getFavorites(),e.toast.fire({...s("成功加入收藏")})})}},deleteFavorite(t){const{alertstyles:e,baseContent:s}=n();o.delete(`${a}/favorites/${t}`).then(()=>{this.getFavorites(),e.toast.fire({...s("已移除收藏")})})},getFavorites(){o.get(`${a}/favorites?userId=${r}`).then(t=>{const{data:e}=t;e.forEach(s=>{this.favoritesObj[s.productId]=s.id}),this.favorites=e.map(s=>s.productId)})}}});export{h as u};
