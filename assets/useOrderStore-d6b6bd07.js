import{C as a,D as s,E as i}from"./index-84e6444c.js";const c="https://sideproject-shuttle.onrender.com",n="https://ec-course-api.hexschool.io/v2/",d="2023shuttle",l=document.cookie.replace(/(?:(?:^|.*;\s*)userId\s*=\s*([^;]*).*$)|^.*$/,"$1"),h=a("orders",{state:()=>({orderInfo:{user:{}}}),actions:{postOrder(e){const t={data:{user:{name:e.名稱,email:e.連絡信箱,tel:e.連絡電話,address:"none",userId:l},message:e.備註,payment:e.付款方式,finalBill:e.finalBill}};s.post(`${n}api/${d}/order`,t).then(o=>{const r=o.data.orderId;document.cookie="couponDiscount=;",document.cookie=`newOrderId=${r}; max-age=86400;Secure`,this.fixBill(e.finalBill,r),i.fire({icon:"success",confirmButtonText:"確認",title:o.data.message,didClose:()=>{this.router.push({name:"order-established"})}})}).catch(o=>{i.fire(`問題${o.response.status}，請洽客服`)})},fixBill(e,t){const o={id:t,total:e};s.post(`${c}/ordersFinalBill`,o)},getOrder(e){s.get(`${n}api/${d}/order/${e}`).then(t=>{this.orderInfo=t.data.order})}}});export{h as u};
