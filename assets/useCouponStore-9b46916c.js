import{E as c,G as e,H as u}from"./index-f004d629.js";const s="https://sideproject-shuttle.onrender.com",i=c("coupon",{state:()=>({couponDiscount:0,coupons:{}}),getters:{cookieCouponDiscount(){return document.cookie.replace(/(?:(?:^|.*;\s*)couponDiscount\s*=\s*([^;]*).*$)|^.*$/,"$1")}},actions:{useCoupon(o){e.get(`${s}/coupons/${o}`).then(t=>{const n=t.data;this.couponDiscount+=t.data.discount,document.cookie=`couponDiscount=${this.couponDiscount}; max-age=86400;Secure`,n.is_used=!0,this.putCouponState(o,n)}).catch(()=>{u.fire({icon:"error",title:"優惠券使用失敗"})})},putCouponState(o,t){e.put(`${s}/coupons/${o}`,t).then(n=>{u.fire({icon:"success",confirmButtonText:"確認",title:`成功套用「${n.data.title}」`,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}}),this.couponCode=""})},getCoupons(){e.get(`${s}/coupons`).then(o=>{console.log(o.data),this.coupons=o.data})}}});export{i as u};
