import{E as i,G as n,H as a}from"./index-17ffa8d7.js";const s="https://sideproject-shuttle.onrender.com",c=i("coupon",{state:()=>({couponDiscount:0,coupons:{}}),getters:{cookieCouponDiscount(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)couponDiscount\s*=\s*([^;]*).*$)|^.*$/,"$1");return o||0}},actions:{useCoupon(o){n.get(`${s}/coupons/${o}`).then(t=>{const e=t.data;a.fire({icon:"success",confirmButtonText:"確認",title:`成功套用「${t.data.title}」`,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}}),this.couponDiscount+=t.data.discount,document.cookie=`couponDiscount=${this.couponDiscount}; max-age=86400;Secure`,e.is_used=!0}).catch(()=>{a.fire({icon:"error",title:"優惠券使用失敗"})})},putCouponState(o,t){n.put(`${s}/coupons/${o}`,t).then(e=>{a.fire({icon:"success",confirmButtonText:"確認",title:`成功套用「${e.data.title}」`,showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}}),this.couponCode=""})},getCoupons(){n.get(`${s}/coupons`).then(o=>{console.log(o.data),this.coupons=o.data})}}});export{c as u};
